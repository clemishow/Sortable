/*! Sortable 1.9.0 - MIT | git://github.com/SortableJS/Sortable.git */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _package=require("../package.json"),_BrowserInfo=require("./BrowserInfo.js"),_Animation=_interopRequireDefault(require("./Animation.js")),_PluginManager=_interopRequireDefault(require("./PluginManager.js")),_EventDispatcher=_interopRequireDefault(require("./EventDispatcher.js")),_utils=require("./utils.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _objectWithoutProperties(t,e){if(null==t)return{};var o,n,l=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)o=a[n],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(l[o]=t[o])}return l}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var o,n,l={},a=Object.keys(t);for(n=0;n<a.length;n++)o=a[n],e.indexOf(o)>=0||(l[o]=t[o]);return l}var pluginEvent=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.evt,l=_objectWithoutProperties(o,["evt"]);_PluginManager.default.pluginEvent.bind(Sortable)(t,e,{dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:n,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(t){_dispatchEvent({sortable:e,name:t,originalEvent:n})},...l})};function _dispatchEvent(t){(0,_EventDispatcher.default)({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,...t})}if("undefined"==typeof window||!window.document)throw new Error("Sortable.js requires a window with a document");var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,tapEvt,touchEvt,moved,lastTarget,lastDirection,targetMoveDistance,ghostRelativeParent,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],pastFirstInvertThresh=!1,isCircumstantialInvert=!1,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],PositionGhostAbsolutely=_BrowserInfo.IOS,CSSFloatProperty=_BrowserInfo.Edge||_BrowserInfo.IE11OrLess?"cssFloat":"float",supportDraggable="draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(_BrowserInfo.IE11OrLess)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),_detectDirection=function(t,e){var o=(0,_utils.css)(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),l=(0,_utils.getChild)(t,0,e),a=(0,_utils.getChild)(t,1,e),r=l&&(0,_utils.css)(l),i=a&&(0,_utils.css)(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+(0,_utils.getRect)(l).width,d=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+(0,_utils.getRect)(a).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&"none"!==r.float){var u="left"===r.float?"left":"right";return!a||"both"!==i.clear&&i.clear!==u?"horizontal":"vertical"}return l&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=n&&"none"===o[CSSFloatProperty]||a&&"none"===o[CSSFloatProperty]&&s+d>n)?"vertical":"horizontal"},_detectNearestEmptySortable=function(t,e){for(var o in sortables)if(!(0,_utils.lastChild)(sortables[o])){var n=(0,_utils.getRect)(sortables[o]),l=sortables[o][_utils.expando].options.emptyInsertThreshold,a=t>=n.left-l&&t<=n.right+l,r=e>=n.top-l&&e<=n.bottom+l;if(l&&a&&r)return sortables[o]}},_prepareGroup=function(t){function e(t,o){return function(n,l,a,r){var i=n.options.group.name&&l.options.group.name&&n.options.group.name===l.options.group.name;if(null==t&&(o||i))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return e(t(n,l,a,r),o)(n,l,a,r);var s=(o?n:l).options.group.name;return!0===t||"string"==typeof t&&t===s||t.join&&t.indexOf(s)>-1}}var o={},n=t.group;n&&"object"==_typeof(n)||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&(0,_utils.css)(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&(0,_utils.css)(ghostEl,"display","")};document.addEventListener("click",function(t){if(ignoreNextClick)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(t){if(dragEl){t=t.touches?t.touches[0]:t;var e=_detectNearestEmptySortable(t.clientX,t.clientY);if(e){var o={};for(var n in t)o[n]=t[n];o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[_utils.expando]._onDragOver(o)}}},_checkOutsideTargetEl=function(t){dragEl&&dragEl.parentNode[_utils.expando]._isOutsideThisEl(t.target)};function Sortable(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Object.assign({},e),t[_utils.expando]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnElement:null,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in _PluginManager.default.initializePlugins(this,t,o),o)!(n in e)&&(e[n]=o[n]);for(var l in _prepareGroup(e),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!e.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?(0,_utils.on)(t,"pointerdown",this._onTapStart):((0,_utils.on)(t,"mousedown",this._onTapStart),(0,_utils.on)(t,"touchstart",this._onTapStart)),this.nativeDraggable&&((0,_utils.on)(t,"dragover",this),(0,_utils.on)(t,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Object.assign(this,(0,_Animation.default)())}function _globalDragOver(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function _onMove(t,e,o,n,l,a,r,i){var s,d,u=t[_utils.expando],c=u.options.onMove;return!window.CustomEvent||_BrowserInfo.IE11OrLess||_BrowserInfo.Edge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=o,s.draggedRect=n,s.related=l||e,s.relatedRect=a||(0,_utils.getRect)(e),s.willInsertAfter=i,s.originalEvent=r,t.dispatchEvent(s),c&&(d=c.call(u,s,r)),d}function _disableDraggable(t){t.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsLast(t,e,o){var n=(0,_utils.getRect)((0,_utils.lastChild)(o.el,o.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}function _getSwapDirection(t,e,o,n,l,a,r){var i=(0,_utils.getRect)(e),s=o?t.clientY:t.clientX,d=o?i.height:i.width,u=o?i.top:i.left,c=o?i.bottom:i.right,g=!1;if(!a)if(r&&targetMoveDistance<d*n){if(!pastFirstInvertThresh&&(1===lastDirection?s>u+d*l/2:s<c-d*l/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)g=!0;else if(1===lastDirection?s<u+targetMoveDistance:s>c-targetMoveDistance)return-lastDirection}else if(s>u+d*(1-n)/2&&s<c-d*(1-n)/2)return _getInsertDirection(e);return(g=g||a)&&(s<u+d*l/2||s>c-d*l/2)?s>u+d/2?1:-1:0}function _getInsertDirection(t){return(0,_utils.index)(dragEl)<(0,_utils.index)(t)?1:-1}function _generateId(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function _saveInputCheckedState(t){savedInputChecked.length=0;for(var e=t.getElementsByTagName("input"),o=e.length;o--;){var n=e[o];n.checked&&savedInputChecked.push(n)}}function _nextTick(t){return setTimeout(t,0)}function _cancelNextTick(t){return clearTimeout(t)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(lastTarget=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,dragEl):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,n=this.options,l=n.preventOnFilter,a=t.type,r=t.touches&&t.touches[0],i=(r||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||i,d=n.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||n.disabled||s.isContentEditable||(i=(0,_utils.closest)(i,n.draggable,o,!1))&&i.animated||lastDownEl===i)){if(oldIndex=(0,_utils.index)(i),oldDraggableIndex=(0,_utils.index)(i,n.draggable),"function"==typeof d){if(d.call(this,t,i,this))return _dispatchEvent({sortable:e,rootEl:s,name:"filter",targetEl:i,toEl:o,fromEl:o}),pluginEvent("filter",e,{evt:t}),void(l&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some(function(n){if(n=(0,_utils.closest)(s,n.trim(),o,!1))return _dispatchEvent({sortable:e,rootEl:n,name:"filter",targetEl:i,fromEl:o,toEl:o}),pluginEvent("filter",e,{evt:t}),!0})))return void(l&&t.cancelable&&t.preventDefault());n.handle&&!(0,_utils.closest)(s,n.handle,o,!1)||this._prepareDragStart(t,r,i)}}},_prepareDragStart:function(t,e,o){var n,l=this,a=l.el,r=l.options,i=a.ownerDocument;if(o&&!dragEl&&o.parentNode===a)if(rootEl=a,parentEl=(dragEl=o).parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=r.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(e||t).clientX,clientY:(e||t).clientY},this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,dragEl.style["will-change"]="all",n=function(){pluginEvent("delayEnded",l,{evt:t}),Sortable.eventCanceled?l._onDrop():(l._disableDelayedDragEvents(),!_BrowserInfo.FireFox&&l.nativeDraggable&&(dragEl.draggable=!0),l._triggerDragStart(t,e),_dispatchEvent({sortable:l,name:"choose",originalEvent:t}),(0,_utils.toggleClass)(dragEl,r.chosenClass,!0))},r.ignore.split(",").forEach(function(t){(0,_utils.find)(dragEl,t.trim(),_disableDraggable)}),(0,_utils.on)(i,"dragover",nearestEmptyInsertDetectEvent),(0,_utils.on)(i,"mousemove",nearestEmptyInsertDetectEvent),(0,_utils.on)(i,"touchmove",nearestEmptyInsertDetectEvent),(0,_utils.on)(i,"mouseup",l._onDrop),(0,_utils.on)(i,"touchend",l._onDrop),(0,_utils.on)(i,"touchcancel",l._onDrop),_BrowserInfo.FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(_BrowserInfo.Edge||_BrowserInfo.IE11OrLess))n();else{if(Sortable.eventCanceled)return void this._onDrop();(0,_utils.on)(i,"mouseup",l._disableDelayedDrag),(0,_utils.on)(i,"touchend",l._disableDelayedDrag),(0,_utils.on)(i,"touchcancel",l._disableDelayedDrag),(0,_utils.on)(i,"mousemove",l._delayedDragTouchMoveHandler),(0,_utils.on)(i,"touchmove",l._delayedDragTouchMoveHandler),r.supportPointer&&(0,_utils.on)(i,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(n,r.delay)}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;(0,_utils.off)(t,"mouseup",this._disableDelayedDrag),(0,_utils.off)(t,"touchend",this._disableDelayedDrag),(0,_utils.off)(t,"touchcancel",this._disableDelayedDrag),(0,_utils.off)(t,"mousemove",this._delayedDragTouchMoveHandler),(0,_utils.off)(t,"touchmove",this._delayedDragTouchMoveHandler),(0,_utils.off)(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||("touch"==t.pointerType?t:null),!this.nativeDraggable||e?this.options.supportPointer?(0,_utils.on)(document,"pointermove",this._onTouchMove):e?(0,_utils.on)(document,"touchmove",this._onTouchMove):(0,_utils.on)(document,"mousemove",this._onTouchMove):((0,_utils.on)(dragEl,"dragend",this),(0,_utils.on)(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:e}),this.nativeDraggable&&(0,_utils.on)(document,"dragover",_checkOutsideTargetEl);var o=this.options;!t&&(0,_utils.toggleClass)(dragEl,o.dragClass,!1),(0,_utils.toggleClass)(dragEl,o.ghostClass,!0),Sortable.active=this,t&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var t=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==e;)e=t;if(dragEl.parentNode[_utils.expando]._isOutsideThisEl(t),e)do{if(e[_utils.expando]){if(e[_utils.expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(t){if(tapEvt){var e=this.options,o=e.fallbackTolerance,n=e.fallbackOffset,l=t.touches?t.touches[0]:t,a=ghostEl&&(0,_utils.matrix)(ghostEl),r=ghostEl&&a&&a.a,i=ghostEl&&a&&a.d,s=PositionGhostAbsolutely&&ghostRelativeParent&&(0,_utils.getRelativeScrollOffset)(ghostRelativeParent),d=(l.clientX-tapEvt.clientX+n.x)/(r||1)+(s?s[0]-ghostRelativeParentInitialScroll[0]:0)/(r||1),u=(l.clientY-tapEvt.clientY+n.y)/(i||1)+(s?s[1]-ghostRelativeParentInitialScroll[1]:0)/(i||1),c=t.touches?"translate3d("+d+"px,"+u+"px,0)":"translate("+d+"px,"+u+"px)";if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}touchEvt=l,(0,_utils.css)(ghostEl,"webkitTransform",c),(0,_utils.css)(ghostEl,"mozTransform",c),(0,_utils.css)(ghostEl,"msTransform",c),(0,_utils.css)(ghostEl,"transform",c),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ghostEl){var t=this.options.fallbackOnElement,e=(0,_utils.getRect)(dragEl,!0,PositionGhostAbsolutely,!0,t),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=t;"static"===(0,_utils.css)(ghostRelativeParent,"position")&&"none"===(0,_utils.css)(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=(0,_utils.getWindowScrollingElement)()),e.top+=ghostRelativeParent.scrollTop,e.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=(0,_utils.getWindowScrollingElement)(),ghostRelativeParentInitialScroll=(0,_utils.getRelativeScrollOffset)(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),(0,_utils.toggleClass)(ghostEl,o.ghostClass,!1),(0,_utils.toggleClass)(ghostEl,o.fallbackClass,!0),(0,_utils.toggleClass)(ghostEl,o.dragClass,!0),(0,_utils.css)(ghostEl,"transition",""),(0,_utils.css)(ghostEl,"transform",""),(0,_utils.css)(ghostEl,"box-sizing","border-box"),(0,_utils.css)(ghostEl,"margin",0),(0,_utils.css)(ghostEl,"top",e.top),(0,_utils.css)(ghostEl,"left",e.left),(0,_utils.css)(ghostEl,"width",e.width),(0,_utils.css)(ghostEl,"height",e.height),(0,_utils.css)(ghostEl,"opacity","0.8"),(0,_utils.css)(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),(0,_utils.css)(ghostEl,"zIndex","100000"),(0,_utils.css)(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,t.appendChild(ghostEl)}},_onDragStart:function(t,e){var o=this,n=t.dataTransfer,l=o.options;pluginEvent("dragStart",this,{evt:t}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=(0,_utils.clone)(dragEl)).draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),(0,_utils.toggleClass)(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick(function(){pluginEvent("clone",o),Sortable.eventCanceled||(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))}),!e&&(0,_utils.toggleClass)(dragEl,l.dragClass,!0),e?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):((0,_utils.off)(document,"mouseup",o._onDrop),(0,_utils.off)(document,"touchend",o._onDrop),(0,_utils.off)(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(o,n,dragEl)),(0,_utils.on)(document,"drop",o),(0,_utils.css)(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,e,t)),(0,_utils.on)(document,"selectstart",o),moved=!0,_BrowserInfo.Safari&&(0,_utils.css)(document.body,"user-select","none"))},_onDragOver:function(t){var e,o,n,l,a=this.el,r=t.target,i=this.options,s=i.group,d=Sortable.active,u=activeGroup===s,c=i.sort,g=putSortable||d,h=this,p=!1;if(!_silent){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),r=(0,_utils.closest)(r,i.draggable,a,!0),C("dragOver"),Sortable.eventCanceled)return p;if(dragEl.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return P(!1);if(ignoreNextClick=!1,d&&!i.disabled&&(u?c||(n=!rootEl.contains(dragEl)):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,d,dragEl,t))&&s.checkPut(this,d,dragEl,t))){if(l="vertical"===this._getDirection(t,r),e=(0,_utils.getRect)(dragEl),C("dragOverValid"),Sortable.eventCanceled)return p;if(n)return parentEl=rootEl,T(),this._hideClone(),C("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),P(!0);var v=(0,_utils.lastChild)(a,i.draggable);if(!v||_ghostIsLast(t,l,this)&&!v.animated){if(v===dragEl)return P(!1);if(v&&a===t.target&&(r=v),r&&(o=(0,_utils.getRect)(r)),!1!==_onMove(rootEl,a,dragEl,e,r,o,t,!!r))return T(),a.appendChild(dragEl),parentEl=a,O(),P(!0)}else if(r.parentNode===a){var _,f,E,b=dragEl.parentNode!==a,m=l?"top":"left",D=(0,_utils.isScrolledPast)(r,null,"top","top")||(0,_utils.isScrolledPast)(dragEl,null,"top","top"),S=D?D.scrollTop:void 0;if(lastTarget!==r&&(f=(0,_utils.getRect)(r)[m],pastFirstInvertThresh=!1,isCircumstantialInvert=i.invertSwap||b),0!==(_=_getSwapDirection(t,r,l,i.swapThreshold,null==i.invertedSwapThreshold?i.swapThreshold:i.invertedSwapThreshold,isCircumstantialInvert,lastTarget===r))){var x=(0,_utils.index)(dragEl);do{x-=_,E=parentEl.children[x]}while(E&&("none"===(0,_utils.css)(E,"display")||E===ghostEl))}if(0===_||E===r)return P(!1);lastTarget=r,lastDirection=_,o=(0,_utils.getRect)(r);var w=r.nextElementSibling,I=!1,y=_onMove(rootEl,a,dragEl,e,r,o,t,I=1===_);if(!1!==y)return 1!==y&&-1!==y||(I=1===y),_silent=!0,setTimeout(_unsilent,30),T(),I&&!w?a.appendChild(dragEl):r.parentNode.insertBefore(dragEl,I?w:r),D&&(0,_utils.scrollBy)(D,0,S-D.scrollTop),parentEl=dragEl.parentNode,void 0===f||isCircumstantialInvert||(targetMoveDistance=Math.abs(f-(0,_utils.getRect)(r)[m])),O(),P(!0)}if(a.contains(dragEl))return P(!1)}return!1}function C(i,s){pluginEvent(i,h,{evt:t,isOwner:u,axis:l?"vertical":"horizontal",revert:n,dragRect:e,targetRect:o,canSort:c,fromSortable:g,target:r,completed:P,onMove:function(o,n){_onMove(rootEl,a,dragEl,e,o,(0,_utils.getRect)(o),t,n)},changed:O,...s})}function T(){C("dragOverAnimationCapture"),h.captureAnimationState(),h!==g&&g.captureAnimationState()}function P(e){return C("dragOverCompleted",{insertion:e}),e&&(u?d._hideClone():d._showClone(h),h!==g&&((0,_utils.toggleClass)(dragEl,putSortable?putSortable.options.ghostClass:d.options.ghostClass,!1),(0,_utils.toggleClass)(dragEl,i.ghostClass,!0)),putSortable!==h&&h!==Sortable.active?putSortable=h:h===Sortable.active&&putSortable&&(putSortable=null),g===h&&(h._ignoreWhileAnimating=r),h.animateAll(function(){C("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===dragEl&&!dragEl.animated||r===a&&!r.animated)&&(lastTarget=null),i.dragoverBubble||t.rootEl||r===document||(dragEl.parentNode[_utils.expando]._isOutsideThisEl(t.target),!e&&nearestEmptyInsertDetectEvent(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function O(){newIndex=(0,_utils.index)(dragEl),newDraggableIndex=(0,_utils.index)(dragEl,i.draggable),_dispatchEvent({sortable:h,name:"change",toEl:a,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){(0,_utils.off)(document,"mousemove",this._onTouchMove),(0,_utils.off)(document,"touchmove",this._onTouchMove),(0,_utils.off)(document,"pointermove",this._onTouchMove),(0,_utils.off)(document,"dragover",nearestEmptyInsertDetectEvent),(0,_utils.off)(document,"mousemove",nearestEmptyInsertDetectEvent),(0,_utils.off)(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var t=this.el.ownerDocument;(0,_utils.off)(t,"mouseup",this._onDrop),(0,_utils.off)(t,"touchend",this._onDrop),(0,_utils.off)(t,"pointerup",this._onDrop),(0,_utils.off)(t,"touchcancel",this._onDrop),(0,_utils.off)(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;newIndex=(0,_utils.index)(dragEl),newDraggableIndex=(0,_utils.index)(dragEl,o.draggable),pluginEvent("drop",this,{evt:t}),newIndex=(0,_utils.index)(dragEl),newDraggableIndex=(0,_utils.index)(dragEl,o.draggable),Sortable.eventCanceled?this._nulling():(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&((0,_utils.off)(document,"drop",this),(0,_utils.off)(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_BrowserInfo.Safari&&(0,_utils.css)(document.body,"user-select",""),t&&(moved&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&(0,_utils.off)(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&(0,_utils.toggleClass)(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),(0,_utils.toggleClass)(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:t}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:t}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:t}),this.save()))),this._nulling())},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(t){t.checked=!0}),savedInputChecked.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(t),_globalDragOver(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],o=this.el.children,n=0,l=o.length,a=this.options;n<l;n++)t=o[n],(0,_utils.closest)(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||_generateId(t));return e},sort:function(t){var e={},o=this.el;this.toArray().forEach(function(t,n){var l=o.children[n];(0,_utils.closest)(l,this.options.draggable,o,!1)&&(e[t]=l)},this),t.forEach(function(t){e[t]&&(o.removeChild(e[t]),o.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return(0,_utils.closest)(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];var n=_PluginManager.default.modifyOption(this,t,e);o[t]=void 0!==n?n:e,"group"===t&&_prepareGroup(o)},destroy:function(){pluginEvent("destroy",this);var t=this.el;t[_utils.expando]=null,(0,_utils.off)(t,"mousedown",this._onTapStart),(0,_utils.off)(t,"touchstart",this._onTapStart),(0,_utils.off)(t,"pointerdown",this._onTapStart),this.nativeDraggable&&((0,_utils.off)(t,"dragover",this),(0,_utils.off)(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),sortables.splice(sortables.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;(0,_utils.css)(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;rootEl.contains(dragEl)&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this._animate(dragEl,cloneEl),(0,_utils.css)(cloneEl,"display",""),cloneHidden=!1}}else this._hideClone()}},(0,_utils.on)(document,"touchmove",function(t){(Sortable.active||awaitingDragStarted)&&t.cancelable&&t.preventDefault()}),Sortable.utils={on:_utils.on,off:_utils.off,css:_utils.css,find:_utils.find,is:function(t,e){return!!(0,_utils.closest)(t,e,t,!1)},extend:_utils.extend,throttle:_utils.throttle,closest:_utils.closest,toggleClass:_utils.toggleClass,clone:_utils.clone,index:_utils.index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:_utils.getChild},Sortable.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];for(var n in e[0].constructor===Array&&(e=e[0]),e){var l=e[n];if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(el));l.utils&&(Sortable.utils={...Sortable.utils,...l.utils}),_PluginManager.default.mount(l)}},Sortable.create=function(t,e){return new Sortable(t,e)},Sortable.version=_package.version;var _default=Sortable;exports.default=_default;